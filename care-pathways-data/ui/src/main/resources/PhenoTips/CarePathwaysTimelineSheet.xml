<?xml version='1.0' encoding='UTF-8'?>

<!--
 * See the NOTICE file distributed with this work for additional
 * information regarding copyright ownership.
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see http://www.gnu.org/licenses/
-->

<xwikidoc version="1.1">
  <web>PhenoTips</web>
  <name>CarePathwaysTimelineSheet</name>
  <language/>
  <defaultLanguage/>
  <translation>0</translation>
  <creator>xwiki:XWiki.Admin</creator>
  <creationDate>1523477699000</creationDate>
  <parent>PhenoTips.PatientSheet</parent>
  <author>xwiki:XWiki.Admin</author>
  <contentAuthor>xwiki:XWiki.Admin</contentAuthor>
  <date>1523478215000</date>
  <contentUpdateDate>1523478215000</contentUpdateDate>
  <version>1.1</version>
  <title/>
  <comment/>
  <minorEdit>false</minorEdit>
  <syntaxId>xwiki/2.1</syntaxId>
  <hidden>false</hidden>
  <content>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{include reference="PhenoTips.FormMacros" /}}

{{include reference="PhenoTips.CarePathways" /}}

{{velocity output=false}}
$xwiki.ssx.use('PhenoTips.PatientSheetCode', {'colorTheme' : "$xwiki.getSpacePreference('colorTheme')"})##
$xwiki.jsx.use('PhenoTips.CarePathways')##
$xwiki.ssx.use('PhenoTips.CarePathways')##
$xwiki.ssx.use('PhenoTips.CarePathwaysTimelineSheet')##
$xwiki.jsx.use('PhenoTips.CarePathwaysTimelineSheet')##
$xwiki.jsfx.use('uicomponents/widgets/validation/scrollValidation.js')##
##
##
#set ($displayDocExtra = false)
##
##
#set($obj = $doc.getObject('PhenoTips.CarePathwaysTimelineSheet', true))
#set($class = $obj.xWikiClass)
#set($thisClass = $class)
#set($patientObj = $doc.getObject('PhenoTips.PatientClass'))
#set($psClass = $patientObj.xWikiClass)
#set($discard = $doc.use($obj))
## Disable the Preview button
#set($previewenabled = false)
##
##
#macro (__displayDateRow $propName $subProp $mandatory)
  &lt;tr class="date $propName#if($mandatory) mandatory-date#{end}"&gt;
    &lt;td&gt;
    {{/html}}

    #__label($propName "" "")##
    #if ("$!subProp" != "")
      #if($xcontext.action == "edit")
        #__display($subProp)
      #else
        #set($subPropVal = $doc.display($subProp))
        {{html clean="false" wiki="false"}}&lt;span class="selected-sub-property"&gt;{{/html}}#if("$!{subPropVal}" != "")($subPropVal)#{end}{{html clean="false" wiki="false"}}&lt;/span&gt;{{/html}}
      #end
    #end
    {{html clean="false" wiki="false"}}##
    &lt;/td&gt;
    &lt;td&gt;
    {{/html}}
    #__display($propName)
    {{html clean="false" wiki="false"}}##
    &lt;/td&gt;
  &lt;/tr&gt;
#end
##
##
#macro (__displayDobRow $propName $mandatory)
  &lt;tr class="date $propName#if($mandatory) mandatory-date#{end}"&gt;
    &lt;td&gt;
    {{/html}}##
    #__label($propName "" "")##
    {{html clean="false" wiki="false"}}
    &lt;/td&gt;
    &lt;td&gt;
    {{/html}}
    #set($display = $patientObj.display($propName, $xcontext.action))
    (% class="displayed-value"%)(((
    #if ($xcontext.action == 'edit' || "$!{display}" != "")
      $display
    #else
      -
    #end
    )))
    {{html clean="false" wiki="false"}}##
    &lt;/td&gt;
  &lt;/tr&gt;
#end
##
##
#macro (__displayTimeline)
  #set ($section = "timeline")##
  #set ($sheet = "$!{class.name}")##
  {{html clean="false" wiki="false"}}##
  &lt;div id="${section}-questionnaire" class="care-pathways-questionnaire"&gt;
    &lt;table class="date-items-table chapter"&gt;
    #set ($class = $psClass)##
    #__displayDobRow("date_of_birth", true)##
    #set ($class = $thisClass)##
    #__displayDateRow("symptom_onset_date", "", true)##
    #__displayDateRow("referral_to_genetics_date", "", true)##
    #__displayDateRow("first_genetic_consult_date", "", true)##
    #__displayDateRow("second_genetic_consult_date", "", false)##
    #__displayDateRow("third_genetic_consult_date", "", false)##
    #__displayDateRow("sequencing_bloodwork_date", "type_of_sequencing_bloodwork", true)##
    #__displayDateRow("moh_approval_date", "", false)##
    #__displayDateRow("primary_variant_research_lab_report_date", "", false)##
    #__displayDateRow("primary_variant_clinical_lab_report_date", "", false)##
    #__displayDateRow("primary_variant_interim_negative_report_date", "", false)##
    #__displayDateRow("primary_result_reported_date", "", true)##
    #__displayDateRow("secondary_variant_research_lab_report_date", "", false)##
    #__displayDateRow("secondary_variant_clinical_lab_report_date", "", false)##
    #__displayDateRow("secondary_variant_interim_negative_report_date", "", false)##
    #__displayDateRow("secondary_result_reported_date", "", false)##
    &lt;/table&gt;
  &lt;/div&gt;
  {{/html}}
#end
##
##
{{/velocity}}

{{velocity}}
(% class="" id="care-pathways-timeline-container"%)(((##
{{html clean="false" wiki="false"}}##
  &lt;p class="box infomessage"&gt;Time to diagnosis via genome-wide sequencing&lt;/p&gt;
{{/html}}##
  #__displayTimeline()##
{{html clean="false" wiki="false"}}##
  &lt;input type='hidden' id='prefix' value='$!{class.name}_$!{obj.number}_'/&gt;
  &lt;input type='hidden' id='current-tab-id' value='care-pathways-timeline-tab'/&gt;
  &lt;input type='hidden' name="objectPolicy" value='updateOrCreate'/&gt;
  #set ($supported_actions = ['edit', 'view'])
  &lt;input type='hidden' name="returnTo" value='#if ($supported_actions.contains("$!request.returnTo"))${request.returnTo}#{else}edit#{end}'/&gt;
  &lt;input type='hidden' name="cpredirect" value="$escapetool.xml($doc.getURL("view", "sheet=$!{class.name}&amp;returnTo=view"))"/&gt;
  &lt;input type='hidden' name="cpActionEdit" value="$escapetool.xml($doc.getURL("edit", "sheet=$!{class.name}&amp;returnTo=edit"))"/&gt;
{{/html}}##
)))
{{/velocity}}</content>
  <class>
    <name>PhenoTips.CarePathwaysTimelineSheet</name>
    <customClass/>
    <customMapping/>
    <defaultViewSheet/>
    <defaultEditSheet/>
    <defaultWeb/>
    <nameField/>
    <validationScript/>
    <first_genetic_consult_date>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <dateFormat>yyyy-MM-dd</dateFormat>
      <disabled>0</disabled>
      <emptyIsToday>0</emptyIsToday>
      <name>first_genetic_consult_date</name>
      <number>19</number>
      <picker>1</picker>
      <prettyName>Date of first genetic consult</prettyName>
      <size>20</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.DateClass</classType>
    </first_genetic_consult_date>
    <first_genetic_consult_date_entered>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <disabled>0</disabled>
      <name>first_genetic_consult_date_entered</name>
      <number>3</number>
      <picker>0</picker>
      <prettyName>first_genetic_consult_date_entered</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
    </first_genetic_consult_date_entered>
    <moh_approval_date>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <dateFormat>yyyy-MM-dd</dateFormat>
      <disabled>0</disabled>
      <emptyIsToday>0</emptyIsToday>
      <name>moh_approval_date</name>
      <number>23</number>
      <picker>1</picker>
      <prettyName>Date of MOH approval (if applicable)</prettyName>
      <size>20</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.DateClass</classType>
    </moh_approval_date>
    <moh_approval_date_entered>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <disabled>0</disabled>
      <name>moh_approval_date_entered</name>
      <number>8</number>
      <picker>0</picker>
      <prettyName>moh_approval_date_entered</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
    </moh_approval_date_entered>
    <primary_result_reported_date>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <dateFormat>yyyy-MM-dd</dateFormat>
      <disabled>0</disabled>
      <emptyIsToday>0</emptyIsToday>
      <name>primary_result_reported_date</name>
      <number>27</number>
      <picker>1</picker>
      <prettyName>Date primary result reported to family</prettyName>
      <size>20</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.DateClass</classType>
    </primary_result_reported_date>
    <primary_result_reported_date_entered>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <disabled>0</disabled>
      <name>primary_result_reported_date_entered</name>
      <number>12</number>
      <picker>0</picker>
      <prettyName>primary_result_reported_date_entered</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
    </primary_result_reported_date_entered>
    <primary_variant_clinical_lab_report_date>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <dateFormat>yyyy-MM-dd</dateFormat>
      <disabled>0</disabled>
      <emptyIsToday>0</emptyIsToday>
      <name>primary_variant_clinical_lab_report_date</name>
      <number>25</number>
      <picker>1</picker>
      <prettyName>Date of clinical laboratory report for validated primary variant</prettyName>
      <size>20</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.DateClass</classType>
    </primary_variant_clinical_lab_report_date>
    <primary_variant_clinical_lab_report_date_entered>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <disabled>0</disabled>
      <name>primary_variant_clinical_lab_report_date_entered</name>
      <number>10</number>
      <picker>0</picker>
      <prettyName>primary_variant_clinical_lab_report_date_entered</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
    </primary_variant_clinical_lab_report_date_entered>
    <primary_variant_interim_negative_report_date>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <dateFormat>yyyy-MM-dd</dateFormat>
      <disabled>0</disabled>
      <emptyIsToday>0</emptyIsToday>
      <name>primary_variant_interim_negative_report_date</name>
      <number>26</number>
      <picker>1</picker>
      <prettyName>Date of 'interim negative' report for primary indication (if applicable)</prettyName>
      <size>20</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.DateClass</classType>
    </primary_variant_interim_negative_report_date>
    <primary_variant_interim_negative_report_date_entered>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <disabled>0</disabled>
      <name>primary_variant_interim_negative_report_date_entered</name>
      <number>11</number>
      <picker>0</picker>
      <prettyName>primary_variant_interim_negative_report_date_entered</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
    </primary_variant_interim_negative_report_date_entered>
    <primary_variant_research_lab_report_date>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <dateFormat>yyyy-MM-dd</dateFormat>
      <disabled>0</disabled>
      <emptyIsToday>0</emptyIsToday>
      <name>primary_variant_research_lab_report_date</name>
      <number>24</number>
      <picker>1</picker>
      <prettyName>Date of research laboratory report for primary variant (if applicable)</prettyName>
      <size>20</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.DateClass</classType>
    </primary_variant_research_lab_report_date>
    <primary_variant_research_lab_report_date_entered>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <disabled>0</disabled>
      <name>primary_variant_research_lab_report_date_entered</name>
      <number>9</number>
      <picker>0</picker>
      <prettyName>primary_variant_research_lab_report_date_entered</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
    </primary_variant_research_lab_report_date_entered>
    <referral_to_genetics_date>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <dateFormat>yyyy-MM-dd</dateFormat>
      <disabled>0</disabled>
      <emptyIsToday>0</emptyIsToday>
      <name>referral_to_genetics_date</name>
      <number>18</number>
      <picker>1</picker>
      <prettyName>Date of referral to genetics</prettyName>
      <size>20</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.DateClass</classType>
    </referral_to_genetics_date>
    <referral_to_genetics_date_entered>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <disabled>0</disabled>
      <name>referral_to_genetics_date_entered</name>
      <number>2</number>
      <picker>0</picker>
      <prettyName>referral_to_genetics_date_entered</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
    </referral_to_genetics_date_entered>
    <second_genetic_consult_date>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <dateFormat>yyyy-MM-dd</dateFormat>
      <disabled>0</disabled>
      <emptyIsToday>0</emptyIsToday>
      <name>second_genetic_consult_date</name>
      <number>20</number>
      <picker>1</picker>
      <prettyName>Date of second genetic consult</prettyName>
      <size>20</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.DateClass</classType>
    </second_genetic_consult_date>
    <second_genetic_consult_date_entered>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <disabled>0</disabled>
      <name>second_genetic_consult_date_entered</name>
      <number>4</number>
      <picker>0</picker>
      <prettyName>second_genetic_consult_date_entered</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
    </second_genetic_consult_date_entered>
    <secondary_result_reported_date>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <dateFormat>yyyy-MM-dd</dateFormat>
      <disabled>0</disabled>
      <emptyIsToday>0</emptyIsToday>
      <name>secondary_result_reported_date</name>
      <number>31</number>
      <picker>1</picker>
      <prettyName>Date secondary variant result reported to family</prettyName>
      <size>20</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.DateClass</classType>
    </secondary_result_reported_date>
    <secondary_result_reported_date_entered>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <disabled>0</disabled>
      <name>secondary_result_reported_date_entered</name>
      <number>16</number>
      <picker>0</picker>
      <prettyName>secondary_result_reported_date_entered</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
    </secondary_result_reported_date_entered>
    <secondary_variant_clinical_lab_report_date>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <dateFormat>yyyy-MM-dd</dateFormat>
      <disabled>0</disabled>
      <emptyIsToday>0</emptyIsToday>
      <name>secondary_variant_clinical_lab_report_date</name>
      <number>29</number>
      <picker>1</picker>
      <prettyName>Date of research laboratory report for secondary variant (if applicable)</prettyName>
      <size>20</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.DateClass</classType>
    </secondary_variant_clinical_lab_report_date>
    <secondary_variant_clinical_lab_report_date_entered>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <disabled>0</disabled>
      <name>secondary_variant_clinical_lab_report_date_entered</name>
      <number>14</number>
      <picker>0</picker>
      <prettyName>secondary_variant_clinical_lab_report_date_entered</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
    </secondary_variant_clinical_lab_report_date_entered>
    <secondary_variant_interim_negative_report_date>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <dateFormat>yyyy-MM-dd</dateFormat>
      <disabled>0</disabled>
      <emptyIsToday>0</emptyIsToday>
      <name>secondary_variant_interim_negative_report_date</name>
      <number>30</number>
      <picker>1</picker>
      <prettyName>Date of 'interim negative' report for secondary variants (if applicable)</prettyName>
      <size>20</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.DateClass</classType>
    </secondary_variant_interim_negative_report_date>
    <secondary_variant_interim_negative_report_date_entered>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <disabled>0</disabled>
      <name>secondary_variant_interim_negative_report_date_entered</name>
      <number>15</number>
      <picker>0</picker>
      <prettyName>secondary_variant_interim_negative_report_date_entered</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
    </secondary_variant_interim_negative_report_date_entered>
    <secondary_variant_research_lab_report_date>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <dateFormat>yyyy-MM-dd</dateFormat>
      <disabled>0</disabled>
      <emptyIsToday>0</emptyIsToday>
      <name>secondary_variant_research_lab_report_date</name>
      <number>28</number>
      <picker>1</picker>
      <prettyName>Date of research laboratory report for secondary variant (if applicable)</prettyName>
      <size>20</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.DateClass</classType>
    </secondary_variant_research_lab_report_date>
    <secondary_variant_research_lab_report_date_entered>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <disabled>0</disabled>
      <name>secondary_variant_research_lab_report_date_entered</name>
      <number>13</number>
      <picker>0</picker>
      <prettyName>secondary_variant_research_lab_report_date_entered</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
    </secondary_variant_research_lab_report_date_entered>
    <sequencing_bloodwork_date>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <dateFormat>yyyy-MM-dd</dateFormat>
      <disabled>0</disabled>
      <emptyIsToday>0</emptyIsToday>
      <name>sequencing_bloodwork_date</name>
      <number>22</number>
      <picker>1</picker>
      <prettyName>Date of genome-wide sequencing bloodwork</prettyName>
      <size>20</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.DateClass</classType>
    </sequencing_bloodwork_date>
    <sequencing_bloodwork_date_entered>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <disabled>0</disabled>
      <name>sequencing_bloodwork_date_entered</name>
      <number>6</number>
      <picker>0</picker>
      <prettyName>sequencing_bloodwork_date_entered</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
    </sequencing_bloodwork_date_entered>
    <symptom_onset_date>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <dateFormat>yyyy-MM-dd</dateFormat>
      <disabled>0</disabled>
      <emptyIsToday>0</emptyIsToday>
      <name>symptom_onset_date</name>
      <number>17</number>
      <picker>1</picker>
      <prettyName>Date of symptom onset</prettyName>
      <size>20</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.DateClass</classType>
    </symptom_onset_date>
    <symptom_onset_date_entered>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <disabled>0</disabled>
      <name>symptom_onset_date_entered</name>
      <number>1</number>
      <picker>0</picker>
      <prettyName>symptom_onset_date_entered</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
    </symptom_onset_date_entered>
    <third_genetic_consult_date>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <dateFormat>yyyy-MM-dd</dateFormat>
      <disabled>0</disabled>
      <emptyIsToday>0</emptyIsToday>
      <name>third_genetic_consult_date</name>
      <number>21</number>
      <picker>1</picker>
      <prettyName>Date of third genetic consult</prettyName>
      <size>20</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.DateClass</classType>
    </third_genetic_consult_date>
    <third_genetic_consult_date_entered>
      <customDisplay>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity}}{{html clean=false}}
#__displayPropertyAsDate()
{{/html}}{{/velocity}}</customDisplay>
      <disabled>0</disabled>
      <name>third_genetic_consult_date_entered</name>
      <number>5</number>
      <picker>0</picker>
      <prettyName>third_genetic_consult_date_entered</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
    </third_genetic_consult_date_entered>
    <type_of_sequencing_bloodwork>
      <cache>0</cache>
      <customDisplay>{{velocity}}
#set ($wes = "wes")##
#set ($wgs = "wgs")##
#if ($xcontext.action == "edit")
{{html clean="false" wiki="false"}}
&lt;span class="xwiki-form-listclass"&gt;&lt;label for="${prefix}${name}-0"&gt;&lt;input id="${prefix}${name}-0" value="${wes}" name="${prefix}${name}" type="radio" #if($value == $wes || "$!value" == "")checked="checked"#end/&gt;$escapetool.xml($services.localization.render("PhenoTips.CarePathwaysTimelineSheet_type_of_sequencing_bloodwork_${wes}"))&lt;/label&gt;&lt;/span&gt;
&lt;span class="xwiki-form-listclass"&gt;&lt;label for="${prefix}${name}-1"&gt;&lt;input id="${prefix}${name}-1" value="${wgs}" name="${prefix}${name}" type="radio" #if($value == $wgs)checked="checked"#end/&gt;$escapetool.xml($services.localization.render("PhenoTips.CarePathwaysTimelineSheet_type_of_sequencing_bloodwork_${wgs}"))&lt;/label&gt;&lt;/span&gt;
{{/html}}##
#else
{{html clean="false" wiki="false"}}
#if ("$!{value}" != "")
$escapetool.xml($services.localization.render("PhenoTips.CarePathwaysTimelineSheet_type_of_sequencing_bloodwork_${value}"))
#end
{{/html}}##
#end
{{/velocity}}</customDisplay>
      <disabled>0</disabled>
      <displayType>radio</displayType>
      <multiSelect>0</multiSelect>
      <name>type_of_sequencing_bloodwork</name>
      <number>7</number>
      <picker>0</picker>
      <prettyName>type_sequencing_bloodwork</prettyName>
      <relationalStorage>0</relationalStorage>
      <separator>&lt;br/&gt;</separator>
      <separators>,|</separators>
      <size>1</size>
      <sort>none</sort>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <values>wes=WES|wgs=WGS</values>
      <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
    </type_of_sequencing_bloodwork>
  </class>
  <object>
    <name>PhenoTips.CarePathwaysTimelineSheet</name>
    <number>0</number>
    <className>XWiki.JavaScriptExtension</className>
    <guid>54c33c3a-e5c3-4838-8533-13ee69825f4a</guid>
    <class>
      <name>XWiki.JavaScriptExtension</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <cache>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>cache</name>
        <number>5</number>
        <prettyName>Caching policy</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators>|, </separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>long|short|default|forbid</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </cache>
      <code>
        <disabled>0</disabled>
        <name>code</name>
        <number>2</number>
        <prettyName>Code</prettyName>
        <rows>20</rows>
        <size>50</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </code>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
      <parse>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>parse</name>
        <number>4</number>
        <prettyName>Parse content</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </parse>
      <use>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>use</name>
        <number>3</number>
        <prettyName>Use this extension</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators>|, </separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>currentPage|onDemand|always</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </use>
    </class>
    <property>
      <cache>long</cache>
    </property>
    <property>
      <code>var XWiki = (function(XWiki) {
  var addFuzzyDateValidator = function(element) {
    if (!element.__validation) {
      element.__validation = new LiveValidation(element, {validMessage: '', wait : 500});
    }
    element.__validation.add(Validate.Presence, {failureMessage: "$escapetool.javascript($services.localization.render('phenotips.PatientSheetCode.failureSelectValue'))"});

    var fuzzyDiv = element.previous('div.fuzzy-date-picker');
    element.value = element.value === "{}" ? "" : element.value;
    if (fuzzyDiv) {
      fuzzyDiv.toggleClassName("invalid", !element.__validation.validate());
      element.observe("xwiki:date:changed", function(event) {
        fuzzyDiv.toggleClassName("invalid", !element.__validation.validate());
      });
    }
  };

  var init = function(event) {
    $('body').select(".mandatory-date input.fuzzy-date").each(function(element) {
      addFuzzyDateValidator(element);
    });
    return true;
  };

  (XWiki.domIsLoaded &amp;&amp; init()) || document.observe("xwiki:dom:loaded", init);
  document.observe("xwiki:dom:updated", init);

  // End XWiki augmentation.
  return XWiki;
}(XWiki || {}));</code>
    </property>
    <property>
      <name>Initialize validators</name>
    </property>
    <property>
      <parse>1</parse>
    </property>
    <property>
      <use>onDemand</use>
    </property>
  </object>
  <object>
    <name>PhenoTips.CarePathwaysTimelineSheet</name>
    <number>0</number>
    <className>XWiki.StyleSheetExtension</className>
    <guid>f05bd574-5c8c-4f9e-baf1-8940dd4d0852</guid>
    <class>
      <name>XWiki.StyleSheetExtension</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <cache>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>cache</name>
        <number>5</number>
        <prettyName>Caching policy</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators>|, </separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>long|short|default|forbid</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </cache>
      <code>
        <disabled>0</disabled>
        <name>code</name>
        <number>2</number>
        <prettyName>Code</prettyName>
        <rows>20</rows>
        <size>50</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </code>
      <contentType>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>contentType</name>
        <number>6</number>
        <prettyName>Content Type</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators>|, </separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>CSS|LESS</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </contentType>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
      <parse>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>parse</name>
        <number>4</number>
        <prettyName>Parse content</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </parse>
      <use>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>use</name>
        <number>3</number>
        <prettyName>Use this extension</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators>|, </separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>currentPage|onDemand|always</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </use>
    </class>
    <property>
      <cache>long</cache>
    </property>
    <property>
      <code>#template('colorThemeInit.vm')
#care-pathways-timeline-container tr.date:nth-child(2n) {
  background: $theme.borderColor;
}

#care-pathways-timeline-container td &gt; * {
  margin-bottom: .4em;
  margin-top: .4em;
}

#care-pathways-timeline-container td:first-child &gt; *{
  margin-left: 1em;
}

#care-pathways-timeline-container .selected-sub-property {
  margin-left: .2em;
}

#care-pathways-timeline-container .date td > * {
  display: inline-block;
}
</code>
    </property>
    <property>
      <contentType>CSS</contentType>
    </property>
    <property>
      <name>Care Pathways timeline styles</name>
    </property>
    <property>
      <parse>1</parse>
    </property>
    <property>
      <use>onDemand</use>
    </property>
  </object>
  <object>
    <name>PhenoTips.CarePathwaysTimelineSheet</name>
    <number>0</number>
    <className>XWiki.UIExtensionClass</className>
    <guid>10634e25-d26f-4ca2-97b5-b97f7ba7a5ec</guid>
    <class>
      <name>XWiki.UIExtensionClass</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <content>
        <disabled>0</disabled>
        <name>content</name>
        <number>3</number>
        <prettyName>Extension Content</prettyName>
        <rows>10</rows>
        <size>40</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </content>
      <extensionPointId>
        <disabled>0</disabled>
        <name>extensionPointId</name>
        <number>1</number>
        <prettyName>Extension Point ID</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </extensionPointId>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>2</number>
        <prettyName>Extension ID</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
      <parameters>
        <disabled>0</disabled>
        <name>parameters</name>
        <number>4</number>
        <prettyName>Extension Parameters</prettyName>
        <rows>10</rows>
        <size>40</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </parameters>
      <scope>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>scope</name>
        <number>5</number>
        <prettyName>Extension Scope</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators>|, </separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>wiki=Current Wiki|user=Current User|global=Global</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </scope>
    </class>
    <property>
      <content/>
    </property>
    <property>
      <extensionPointId>org.phenotips.patientSheet.tab</extensionPointId>
    </property>
    <property>
      <name>org.phenotips.patientSheet.tab.care-pathways-timeline</name>
    </property>
    <property>
      <parameters>label=Care Pathways Timeline
cssId=care-pathways-timeline-tab
href=$doc.getURL("$!{xcontext.action}", "sheet=PhenoTips.CarePathwaysTimelineSheet&amp;returnTo=$!{xcontext.action}")
container=care-pathways-timeline-container
order=2</parameters>
    </property>
    <property>
      <scope>wiki</scope>
    </property>
  </object>
</xwikidoc>